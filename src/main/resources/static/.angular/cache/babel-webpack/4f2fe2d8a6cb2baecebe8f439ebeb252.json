{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nlet TaskListComponent = class TaskListComponent {\n  constructor(taskService, router, projectService, employeeService, authorService) {\n    this.taskService = taskService;\n    this.router = router;\n    this.projectService = projectService;\n    this.employeeService = employeeService;\n    this.authorService = authorService;\n    this.sortField = 'createdDate';\n    this.sortDesc = '';\n    this.sortBool = true;\n    this.currenPage = 0;\n    this.totalPages = 0;\n    this.modalCreateClass = \"modal\";\n    this.modalChooseClass = \"modal\";\n    this.task = new FormGroup({\n      title: new FormControl(),\n      project: new FormControl(Validators.required),\n      description: new FormControl(),\n      assignedTo: new FormControl(),\n      startDate: new FormControl(),\n      endDate: new FormControl(),\n      priority: new FormControl(),\n      status: new FormControl(\"WAITING\"),\n      percentComplete: new FormControl(0),\n      cost: new FormControl(),\n      costInDays: new FormControl()\n    });\n    this.td = new Date();\n    this.today = `${this.td.getFullYear()}-${this.td.getMonth() + 1 > 9 ? this.td.getMonth() + 1 : '0' + (this.td.getMonth() + 1)}-${this.td.getDate() > 9 ? this.td.getDate() : '0' + this.td.getDate()}`;\n  }\n\n  ngOnInit() {\n    this.pull();\n    this.getProjects();\n    this.getEmpolyees();\n  }\n\n  clickShowCreateModal() {\n    if (this.modalCreateClass == \"modal\") {\n      this.modalCreateClass = \"modal show\";\n    } else this.modalCreateClass = \"modal\";\n  }\n\n  clickShowChooseModal() {\n    if (this.modalChooseClass == \"modal\") {\n      this.modalChooseClass = \"modal show\";\n    } else this.modalChooseClass = \"modal\";\n  }\n\n  pull() {\n    this.tasks = this.taskService.getAll(this.sortField, this.sortDesc);\n  }\n\n  getAuthor() {\n    this.author = this.authorService.getAll();\n  }\n\n  create() {\n    if (this.task.invalid) {\n      this.task.markAsTouched();\n      return;\n    }\n\n    var task = this.task.value;\n    var createdDate = new Date();\n    task.createdDate = `${createdDate.getFullYear()}-${createdDate.getMonth() + 1 > 9 ? createdDate.getMonth() + 1 : '0' + (createdDate.getMonth() + 1)}-${createdDate.getDate() > 9 ? createdDate.getDate() : '0' + createdDate.getDate()}`;\n    console.log(task);\n    console.log(this.task.value);\n    this.taskService.create(task).subscribe(() => {\n      this.pull();\n      this.tasks.subscribe(data => {\n        this.clickShowCreateModal();\n        let newTask = data[\"_embedded\"][\"tasks\"][data[\"_embedded\"][\"tasks\"].length - 1];\n        this.router.navigate([\"task\", \"details\", newTask[\"id\"]]);\n      });\n    });\n  }\n\n  confirm() {\n    this.clickShowChooseModal();\n  }\n\n  getProjects() {\n    this.projects = this.projectService.findByStatus(\"INPROGRESS\");\n  }\n\n  getEmpolyees() {\n    this.employees = this.employeeService.getAll(0, 9999, 'firstName', '');\n  }\n\n  sortTaskBy(field) {\n    this.sortField = field;\n    console.log(this.sortBool, this.sortDesc);\n\n    if (this.sortBool === true) {\n      this.sortBool = false;\n      this.sortDesc = \"desc\";\n    } else {\n      this.sortBool = true;\n      this.sortDesc = '';\n    }\n\n    console.log(this.sortBool, this.sortDesc);\n    this.tasks = this.taskService.getAll(this.sortField, this.sortDesc);\n  }\n\n};\nTaskListComponent = __decorate([Component({\n  selector: 'app-task-list',\n  templateUrl: './task-list.component.html',\n  styleUrls: ['./task-list.component.css']\n})], TaskListComponent);\nexport { TaskListComponent };","map":null,"metadata":{},"sourceType":"module"}